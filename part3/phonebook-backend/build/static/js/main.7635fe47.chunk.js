(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),c=n.n(r),u=n(14),o=n.n(u),l=function(e){var t=e.searchQuery,n=e.setSearchQuery;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,"Filter: "),c.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)}}))},s=n(4),i=function(e){var t=e.addContact,n=e.setNewContact,a=e.newContact;return c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,c.a.createElement("label",null,"Name: "),c.a.createElement("input",{onChange:function(e){return n(Object(s.a)({},a,{name:e.target.value}))},value:a.name}),c.a.createElement("br",null),c.a.createElement("label",null,"Number: "),c.a.createElement("input",{onChange:function(e){return n(Object(s.a)({},a,{number:e.target.value}))},value:a.number})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add")))},m=function(e){var t=e.contacts,n=e.searchQuery,a=e.deleteContactClick;return t?c.a.createElement("ul",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return c.a.createElement("li",{key:e.id},e.name,": ",e.number," ",c.a.createElement("button",{onClick:function(){return a(e)}},"Delete"))}))):null},d=n(2),f=n.n(d),h="/api/phonebook",p=function(){return f.a.get(h)},b=p,v=function(e){return f.a.post(h,e).then((function(){return p().then((function(e){return e}))}))},y=function(e,t){return f.a.put("".concat(h,"/").concat(e),t).then((function(){return p().then((function(e){return e}))}))},E=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(){return p().then((function(e){return e}))}))},g=function(e){var t=e.schema;if(!t.message)return null;var n={color:"error"===t.type?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return c.a.createElement("div",{style:n},t.message)},w=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],u=t[1],o=Object(r.useState)({type:null,message:null}),s=Object(a.a)(o,2),d=s[0],f=s[1];Object(r.useEffect)((function(){b().then((function(e){return u(e.data)}))}),[]);var h=Object(r.useState)({name:"",number:""}),p=Object(a.a)(h,2),w=p[0],C=p[1],j=Object(r.useState)(""),O=Object(a.a)(j,2),k=O[0],S=O[1],I=function(e){var t=e.type,n=e.message,a=e.resetInterval;f({type:t,message:n}),setTimeout((function(){f({type:null,message:null})}),a)};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(g,{schema:d}),c.a.createElement(l,{searchQuery:k,setSearchQuery:S}),c.a.createElement("h2",null,"Add a new contact"),c.a.createElement(i,{addContact:function(e){if(e.preventDefault(),n.map((function(e){return e.name.toLowerCase()})).includes(w.name.toLowerCase())){if(window.confirm("".concat(w.name," is already added to the phonebook, replace the old number with the new one?"))){var t=n.find((function(e){return e.name.toLowerCase()===w.name.toLowerCase()}));y(t.id,w).then((function(e){u(e.data),I({type:"success",message:"".concat(w.name," was updated."),resetInterval:5e3})})).catch((function(e){I({type:"error",message:"Information of ".concat(t.name," has already been removed from the server."),resetInterval:5e3})}))}}else v(w).then((function(e){u(e.data),I({type:"success",message:"".concat(w.name," was added."),resetInterval:5e3})})).catch((function(e){I({type:"error",message:e.response.data.error,resetInterval:5e3})}))},setNewContact:C,newContact:w}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(m,{contacts:n,searchQuery:k,deleteContactClick:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&E(e.id).then((function(t){u(t.data),f({type:"success",message:"".concat(e.name," was deleted."),resetInterval:5e3})}))}}))};o.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7635fe47.chunk.js.map